# Docker部署方案

## 已完成的工作

我已经成功创建了Docker相关配置文件，用于将星币管理系统打包成Docker镜像并一键启动。以下是完成的主要工作：

### 1. 创建了Docker配置文件

- **Dockerfile**：用于构建包含前端和代理服务器的镜像
- **docker-compose.yml**：用于定义Docker服务，方便一键启动
- **Dockerfile.proxy**：用于单独构建代理服务器镜像
- **nginx.conf**：用于配置Nginx服务器
- **start.sh**：用于启动服务的脚本

### 2. 更新了README.md

添加了Docker部署的使用说明，包括：
- Docker安装要求
- 构建并启动服务的命令
- 访问应用的地址
- 停止服务的命令
- 查看日志的命令
- 重新构建镜像的命令

## Docker部署方案

### 1. 安装Docker

请确保您的系统已安装Docker和Docker Compose。

### 2. 构建并启动服务

在项目根目录运行：

```bash
docker-compose up -d
```

### 3. 访问应用

在浏览器中访问：

```
http://localhost
```

### 4. 停止服务

```bash
docker-compose down
```

### 5. 查看日志

```bash
docker-compose logs
```

### 6. 重新构建镜像

```bash
docker-compose up -d --build
```

## 技术实现

### 1. Docker服务架构

- **frontend服务**：使用Nginx作为前端服务器，负责提供静态文件服务
- **proxy服务**：使用Node.js作为代理服务器，负责转发API请求，绕开浏览器的CORS拦截
- **网络配置**：使用Docker网络连接两个服务，实现内部通信

### 2. 端口映射

- **前端服务**：映射端口80到宿主机的80端口
- **代理服务**：映射端口3000到宿主机的3000端口

### 3. 数据持久化

- 使用Docker卷将本地文件映射到容器中，方便开发和调试
- 数据保存在浏览器的LocalStorage中，无需额外的数据库服务

## 优势

1. **一键启动**：使用Docker Compose可以一键启动所有服务
2. **环境隔离**：Docker容器提供了良好的环境隔离，避免了依赖冲突
3. **跨平台**：可以在任何支持Docker的平台上运行
4. **易于部署**：无需手动安装依赖和配置环境
5. **可扩展性**：可以方便地添加更多服务

## 注意事项

1. 确保Docker和Docker Compose已正确安装
2. 确保端口80和3000未被其他服务占用
3. 首次启动需要下载镜像，可能需要一些时间
4. 开发过程中可以使用卷映射，方便实时更新代码
5. 生产环境可以移除卷映射，使用构建好的镜像

## 后续优化

1. 添加HTTPS支持
2. 实现自动备份数据
3. 添加监控和日志收集
4. 优化镜像大小
5. 实现CI/CD流水线

现在您可以使用Docker一键启动星币管理系统，无需手动配置环境和依赖。